<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Viggo Hérault</title>
    <link rel="icon" type="image/png" href="Pictures/star.png">
    <link rel="stylesheet" href="style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>

<body>
    <header>
        <a href="/">
            <h1>Portfolio</h1>
        </a>

        <ul class="menu">
            <li>
                <a href="projects.html">
                    <h3>Projects</h3>
                </a>
            </li>
            <li>
                <a href="about.html">
                    <h3>About Me</h3>
                </a>
            </li>
            <li>
                <a href="contact.html">
                    <h3>Contact</h3>
                </a>
            </li>
        </ul>
    </header>

    <div class="background">
        <div class="content">
            <h2>CONTACT</h2>
            <p>Get in touch</p>
        </div>
    </div>

    <div class="contact-me">
        <p>Feel free to contact me !</p>
        <div class="contact-background">
            <div class="contact-form-wrapper">
                <form name="contact" method="POST" data-netlify="true" netlify-honeypot="bot-field" id="contact-form">
                    <input type="hidden" name="form-name" value="contact" />

                    <label>Your Name:</label>
                    <input type="text" name="name" required />

                    <label>Your Email:</label>
                    <input type="email" name="email" required />

                    <label for="subject">Subject:</label>
                    <input id="subject" type="text" name="subject" required />

                    <label>Message:</label>
                    <textarea name="message" required></textarea>

                    <button type="submit" class="project-button">Send</button>
                </form>
            </div>
        </div>
    </div>

    <div class="footer">
        <div class="footer-links">
            <h2>Follow :</h2>
            <ul class="menu">
                <li>
                    <a href="https://github.com/ViggoHerault" class="menu-link">
                        <img src="Pictures/Github.png" alt="Github" class="logo">
                        <h3>Github</h3>
                    </a>
                </li>
                <li>
                    <a href="https://viggoherault.itch.io" class="menu-link">
                        <img src="Pictures/Itchio.png" alt="Itchio" class="logo">
                        <h3>Itchio</h3>
                    </a>
                </li>
                <li>
                    <a href="https://www.artstation.com/viggo_herault" class="menu-link">
                        <img src="Pictures/ArtStation.png" alt="ArtStation" class="logo">
                        <h3>ArtStation</h3>
                    </a>
                </li>
            </ul>
        </div>
    </div>


    <script>
        (function () {
            const form = document.getElementById('contact-form');
            const modal = document.getElementById('contact-modal');
            const closeBtn = modal.querySelector('.modal-close');

            function encodeFormData(formElement) {
                const fd = new FormData(formElement);
                return new URLSearchParams(fd).toString();
            }

            form.addEventListener('submit', function (e) {
                e.preventDefault();

                const submitBtn = form.querySelector('button[type="submit"]');
                submitBtn.disabled = true;
                submitBtn.textContent = 'Sending...';

                const body = encodeFormData(form);

                fetch("/", {
                    method: "POST",
                    headers: { "Content-Type": "application/x-www-form-urlencoded" },
                    body: body
                })
                    .then(response => {
                        if (response.ok) {
                            form.reset();
                            modal.classList.add('show');
                            modal.setAttribute('aria-hidden', 'false');
                        } else {
                            return response.text().then(t => { throw new Error(t || 'Form submit error'); });
                        }
                    })
                    .catch(err => {
                        console.error('Form submit error:', err);
                        alert('Error sending message — please try again later.');
                    })
                    .finally(() => {
                        submitBtn.disabled = false;
                        submitBtn.textContent = 'Send';
                    });
            });

            closeBtn.addEventListener('click', () => {
                modal.classList.remove('show');
                modal.setAttribute('aria-hidden', 'true');
            });

            modal.addEventListener('click', (ev) => {
                if (ev.target === modal) {
                    modal.classList.remove('show');
                    modal.setAttribute('aria-hidden', 'true');
                }
            });

            document.addEventListener('keydown', (ev) => {
                if (ev.key === 'Escape' && modal.classList.contains('show')) {
                    modal.classList.remove('show');
                    modal.setAttribute('aria-hidden', 'true');
                }
            });
        })();
    </script>


</body>

</html>